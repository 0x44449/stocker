# Stocker UI 명세

이 문서는 클라이언트 화면 구성과 정보 배치를 정의한다.
API 스펙과 백엔드 구현의 기준이 되는 문서로, "사용자에게 무엇을 보여줄 것인가"를 정한다.

---

## 2주 MVP 스코프

### 만들 것
- 메인 피드 (클러스터 헤드라인 카드)
- 관심종목 탭 (종목별 대시보드)
- 종목 상세 (이벤트 타임라인)
- 기사 목록 (클러스터 내 기사)
- 관심종목 설정

### 안 만들 것
- 투표, 이상신호, 섹터, 랭킹, 종목연결, 과거비교 등 특수 카드
- 감성 분석 (긍정/부정 표시)
- 지연 실시간 주가
- 차트
- 회원가입/로그인
- DART 공시 연동 (카드 타입만 정의, 데이터는 이후)

---

## 화면 구조

```
메인 피드 ──(카드 탭)──→ 기사 목록 ──(기사 탭)──→ 웹뷰 (원문)
  │
  ├──(종목 태그 탭)──→ 종목 상세
  │
  └──(검색)──→ 종목 검색 결과 ──(종목 탭)──→ 종목 상세

관심종목 ──(종목 헤더 탭)──→ 종목 상세 ──(항목 탭)──→ 기사 목록
  │       ──(클러스터 탭)──→ 기사 목록
  │       ──(전체보기)────→ 종목 상세
  │
  └──(설정)──→ 관심종목 설정

하단 탭: 피드 | 관심종목 | 설정
```

---

## 화면 1: 메인 피드

### 목적
"오늘 주식 시장에서 무슨 일이 있었나?" - 시장 전체 관점, 시간순

### 피드 구성 로직
1. 관심종목 클러스터 → 무조건 포함
2. 기사 수 상위 N개 클러스터 → 포함 (화제성)
3. 멘션 급증 종목 클러스터 → 포함
4. 관심종목의 연관종목 클러스터 → 포함 (2주 이후)
   - 동일 섹터 (KRX 업종 분류)
   - 최근 N일간 동시 언급 M회 이상
5. 중복 제거 → 시간순 정렬

> 2주 MVP에서는 1~3번만 구현. 4번은 연관종목 테이블 구조와 집계 배치만 준비.

### 카드 정보
| 항목 | 설명 | 필수 |
|------|------|------|
| 카테고리 | 실적, 사업, 규제, 경영 등 | O |
| 헤드라인 | 클러스터 요약문 | O |
| 요약 | 1~2문장 상세 요약 | O |
| 관련 종목 | 종목명 + 역할(주체/경쟁사/동종업계) + 등락률 | O |
| 시간 | 클러스터 내 최초 기사 발행시간 | O |
| 장 상태 | 장전/장중/장후 | O |
| 기사 수 | 클러스터에 포함된 기사 건수 | O |

### 카드 인터랙션
- 카드 탭 → 기사 목록 화면
- 종목 태그 탭 → 종목 상세 화면

### 상단
- 타이틀: "피드"
- 우측: "N종목 구독중"
- 검색바: 종목명 검색 → 종목 상세(타임라인)로 진입. 관심종목이 아닌 종목도 검색 가능.
- 장 상태 인디케이터 (장중 09:00~15:30 / 장전 / 장후)

### 빈 상태
- 관심종목 없을 때: 화제성 카드만 표시

---

## 화면 2: 관심종목 탭

### 목적
"내 종목들 지금 괜찮나?" - 내 종목 관점, 종목별 묶음

> 피드는 "이벤트 중심"이고, 관심종목 탭은 "종목 중심". 관점이 다르다.
> 와우 직업 게시판 비유: 각 종목이 하나의 게시판, 종목 헤더가 공지사항, 주요 클러스터가 핫5 게시글.

### 종목 카드 구성

#### 헤더 (공지사항 역할)
| 항목 | 설명 |
|------|------|
| 종목명 | |
| 종목코드 | |
| 현재가 | 일별 데이터 (지연 실시간은 2주 밖) |
| 등락률 | |
| 오늘 뉴스 건수 | |

#### 클러스터 목록 (핫5 역할)
최근 주요 클러스터 상위 N건 (3~5건)

| 항목 | 설명 |
|------|------|
| 카테고리 뱃지 | |
| 헤드라인 | |
| 시간 | 클러스터 내 최초 기사 발행시간 |
| 기사 수 | |
| 등락률 | 해당일 |

#### 하단
- 전체보기 → 종목 상세 (타임라인)

#### 뉴스 없는 종목
- 헤더(현재가, 등락률)는 표시
- 본문: "최근 주요 뉴스가 없습니다"

### 인터랙션
- 종목 헤더 탭 → 종목 상세
- 클러스터 항목 탭 → 기사 목록
- 전체보기 → 종목 상세

---

## 화면 3: 종목 상세

### 목적
"이 회사에 최근 무슨 일이 있었지?" - 한 종목 딥다이브, 이벤트 타임라인

> 차트 분석하러 온 게 아니라, 뉴스 중심으로 종목을 이해하고 싶은 사용자.
> 번잡한 차트와 숫자는 별도 상세 페이지에서 보여주는 게 맞다.

### 상단: 주가 영역
| 항목 | 설명 |
|------|------|
| 종목명 | |
| 종목코드 | |
| 현재가 | |
| 등락률 | 뱃지 형태 |
| 등락금액 | |

> 이것만. 차트 없음.

### 하단: 이벤트 타임라인
클러스터를 시간 역순으로 나열. 이것이 stocker의 핵심 비전인 "기업 히스토리 피드".

| 항목 | 설명 |
|------|------|
| 카테고리 뱃지 | |
| 헤드라인 | |
| 시간 | 클러스터 내 최초 기사 발행시간 |
| 기사 수 | |
| 해당일 등락률 | 뉴스와 주가 반응을 한눈에 |

- 시간 범위: 제한 없음, 가진 데이터까지. 무한 스크롤.
- 타임라인 도트 색상: 상승(빨강) / 하락(파랑) (한국 관행)

### 인터랙션
- 타임라인 항목 탭 → 기사 목록

---

## 화면 4: 기사 목록

### 목적
클러스터에 속한 개별 기사 확인

### 상단: 클러스터 정보
| 항목 | 설명 |
|------|------|
| 헤드라인 | |
| 카테고리 뱃지 | |
| 요약 | |
| 관련 종목 + 등락률 바 | |
| 시간 | |
| 기사 수 | |

### 기사 목록
| 항목 | 설명 |
|------|------|
| 기사 제목 | |
| 출처 (언론사) | |
| 시간 | |

### 인터랙션
- 기사 탭 → 웹뷰 (원문 이동)
- 종목 태그 탭 → 종목 상세

---

## 화면 5: 관심종목 설정

### 목적
관심종목 추가/삭제

### 구성
- 검색 입력창 (종목명 검색)
- 내 관심종목 목록 (종목명, 종목코드, 삭제 버튼)
- 검색 결과 목록 (종목명, 종목코드, 추가 버튼)

---

## 카드 타입 확장 (2주 이후)

현재는 `NEWS_CLUSTER` 타입만 구현. 향후 아래 타입 추가 가능.

| 카드 타입 | 트리거 | 필요 데이터 | 우선순위 |
|-----------|--------|-------------|----------|
| `NEWS_CLUSTER` | 클러스터링 결과 | 클러스터 + 요약 | MVP |
| `DISCLOSURE` | DART 공시 | DART API + LLM 요약 | 높음 |
| `RANKING` | 주기적 (매일/매주) | 멘션 수 집계 | 중간 |
| `ANOMALY` | 멘션 수 N일 평균 대비 X배 | 멘션 수 히스토리 | 중간 |
| `SECTOR` | 같은 섹터 종목 N개 이상 동시 언급 | 종목-섹터 매핑 | 낮음 |
| `STOCK_LINK` | 두 종목 동시 언급 M회 이상 | 기사별 종목 추출 | 낮음 |
| `COMPARISON` | 동일 종목 유사 이벤트 과거 존재 | 과거 클러스터 + 주가 | 낮음 |

> 특수 카드의 트리거 조건은 처음부터 정교하게 자동화하기 어렵다.
> 느슨한 기준으로 후보를 뽑고, 관리자가 피드 노출 여부를 선택하는 구조로 시작.
> 수동 운영하면서 패턴이 쌓이면 자동화 기준이 보인다.

---

## 피드 카드와 클러스터의 관계

클러스터는 mutable (새 기사 유입 시 재생성), 피드 카드는 immutable (발행 시점 스냅샷).

```
클러스터 (계속 변함)
    ↓ 특정 시점에 "발행"
피드 카드 (확정, immutable)
    └── poll (optional, 향후)
```

- 클러스터가 업데이트되면 카드의 "관련 기사 N건"이 늘어날 수는 있음
- 카드 자체(헤드라인, 요약)와 투표(향후)는 발행 시점에 고정
- "기업 히스토리 피드" 비전과 일치: 피드에 찍힌 이벤트는 과거 기록으로 남아야 함

---

## 투표 기능 (2주 이후)

### 적용 기준
모든 카드에 붙이면 피로감. "앞으로 어떻게 될지 의견이 갈리는 순간"에만 적용.

적합한 경우: 실적 발표(다음 분기 전망), 급등/급락(추세 지속 vs 반전), 대형 이벤트(M&A, 신사업)
부적합한 경우: 단순 뉴스(공장 준공, 배당금 확정)

### 생성 방식
카테고리별 질문 템플릿 매핑 (POC). LLM 생성은 이후.

| 뉴스 카테고리 | 질문 템플릿 | 선택지 |
|---|---|---|
| 실적 발표 | "{quarter} 실적도 서프라이즈?" | 그렇다 / 아니다 |
| 주가 급등 | "추가 상승 여력 있을까?" | 있다 / 없다 |
| 신사업/투자 | "이 투자 성공할까?" | 성공 / 글쎄 |

---

*이 문서는 제품 방향이 변경될 때 업데이트한다.*
