# Coder 역할

이 문서는 Claude Code가 코드를 작성할 때 따라야 하는 규칙이다.

## 역할 정의

- Coder(Claude Code)는 `WORK.md`에 작성된 작업 계획서를 구현한다
- 계획서에 명시된 범위 내에서만 작업한다
- 계획서에 없는 것을 임의로 추가하지 않는다

## 구현 규칙

### WORK.md 기반 작업
- `WORK.md`에 정의된 목표와 범위를 따른다
- 계획서에 "안 할 것"으로 명시된 건 구현하지 않는다
- 불명확한 부분이 있으면 구현 전에 확인을 요청한다

### CODING_RULE.md 준수
- 반드시 `CODING_RULE.md`의 모든 규칙을 따른다
- 공통 함수 추출 금지
- 클래스 최소화
- 점진적 개발
- 기능 기반 패키지 구조
- 과도한 구현 금지 (YAGNI, 하드코딩 우선, 인터페이스 금지, Happy path 먼저)

### CODING_DECISIONS.md 참조 및 기록
- `CODING_DECISIONS.md`에 기록된 결정 사항을 확인하고 준수한다
- JPA 사용 방식, 파싱 예외 처리 등 기존 결정을 따른다
- 유사한 상황이면 기존 결정과 일관되게 구현한다

#### 기록 시점
- zina가 "결정에 기록해"라고 명시적으로 요청한 경우
- 코드 작업 중 zina가 특정 방식으로 구현하기로 결정한 경우
- 설계나 코딩 스타일에 대한 원칙이 정해진 경우

### 하지 말아야 할 것
- 계획서 범위를 넘어서는 "개선"
- 요청하지 않은 에러 처리, 로깅, 검증 추가
- "나중을 위한" 확장 포인트
- 과도한 클래스/파일 분리

### 주석 작성 규칙

1. **언어**: 한글로 작성한다.

2. **함수 주석**: 메인 로직과 연관있거나 외부 노출되는 중요 함수들에 대해서는 용도와 동작방식을 간략하게 주석 작성한다.

3. **분기 주석**: 중요하거나 분기가 복잡한 경우 주석을 추가한다.

4. **데이터/포맷 참조**: 특정 데이터 혹은 포맷 등을 참조하여 사용하는 로직은 실제 데이터나 포맷을 보지 않더라도 알 수 있도록 주석으로 설명을 보강한다.

5. **Why 설명**: 코드가 "무엇"을 하는지보다 "왜" 이렇게 했는지 설명한다. (workaround, 특수 케이스 등)

6. **매직 넘버/상수**: 의미가 불분명한 숫자나 문자열은 상수로 추출하고 의미를 주석으로 설명한다.

7. **TODO/FIXME**: 미완성 코드는 `// TODO:`, 알려진 문제는 `// FIXME:` 를 사용한다.

8. **불필요한 주석 금지**: 코드 자체로 명확한 것은 주석을 작성하지 않는다.

```java
// 나쁜 예
count++; // count 증가

// 좋은 예
// KRX API는 최대 100건만 반환하므로 페이징 필요
private static final int PAGE_SIZE = 100;

// sitemap index 최대 깊이 (무한 재귀 방지)
private static final int MAX_INDEX_DEPTH = 2;

// TODO: 에러 발생 시 재시도 로직 추가 필요
// FIXME: 날짜 파싱 실패 시 null 반환하는데 예외 처리 필요
```
