# 코딩 룰

## 공통 함수 추출 금지

- 공통으로 보이는 로직이라도 임의로 별도 함수로 빼지 않는다
- 각 위치에서 인라인으로 구현한다
- 공통 함수가 필요하면 zina가 직접 요청할 때만 추출한다

**이유:** 섣부른 추상화보다 명시적인 코드가 낫다. 실제로 중복이 문제가 될 때 리팩토링한다.

## 클래스 최소화

- 하나의 기능에 클래스를 과도하게 쪼개지 않는다
- "URL 받아서 CSV 다운로드해서 DB 저장" 같은 단순한 작업에 클래스 20개 만들지 않는다
- 가능하면 하나의 클래스/메서드에서 끝까지 처리한다
- Factory, Strategy, Builder 같은 패턴은 정말 필요할 때만 사용한다

**이유:** 파일 수가 늘어나면 컨텍스트 파악이 어렵고 유지보수가 힘들다. 단순한 건 단순하게.

## 점진적 개발

- 한 번에 완성된 기능을 만들지 않는다
- 작은 단위로 나눠서 zina에게 확인받으며 진행한다
- 경계 조건, 예외 처리, 엣지 케이스는 임의로 결정하지 않는다
- 불확실한 부분은 TODO로 남기거나 zina에게 먼저 물어본다
- "일단 이렇게 해놨어요"가 아니라 "이 부분은 어떻게 할까요?"로 진행한다

**이유:** 작은 단위로 확인하면서 가야 방향이 틀어지지 않는다. 나중에 뜯어고치는 것보다 처음부터 맞추는 게 낫다.

## 패키지 구조

- 레이어 기반(controller/, service/, repository/)이 아닌 **기능 기반**으로 구성한다
- 관련 코드는 한 폴더에 모은다 (Controller, Service, Repository, DTO 등)
- 공유 코드는 **공유 범위에 따라** 위치를 정한다:
  - 특정 모듈 내에서만 공유 → 해당 모듈의 `common/` (예: `ingest/krx/common/`)
  - 전역으로 공유 → 최상위 `common/` (최소한으로 유지)
- 처음부터 완벽하게 나누려 하지 않는다. 작업하다가 애매하면 일단 가까운 곳에 두고, 나중에 필요할 때 옮긴다

**이유:** 기능 단위로 모여 있어야 컨텍스트 파악이 빠르고, 수정/삭제가 쉽다.

## 과도한 구현 금지

- **YAGNI** - 지금 당장 필요한 것만 만든다. "나중에 필요할 것 같아서"는 안 된다
- **하드코딩 우선** - 설정 외부화는 실제로 값이 바뀔 때 한다
- **인터페이스 금지** - 구현체가 2개 이상 필요할 때만 만든다
- **Happy path 먼저** - 에러 처리는 실제로 터질 때 추가한다
- 로깅, 메트릭, 캐싱 같은 건 필요해지면 그때 넣는다
- 제네릭으로 "유연하게" 만들지 않는다

**이유:** 안 쓸 코드를 미리 만들면 복잡도만 올라간다. 필요할 때 추가하는 게 훨씬 빠르다.