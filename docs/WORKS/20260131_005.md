# 뉴스 크롤러 수동 트리거 엔드포인트

## 배경

- 뉴스 크롤러가 스케줄러로만 동작해서 수동 테스트/트리거 불가
- Docker 환경에서 크롤러 동작 확인을 위해 수동 트리거 필요

## 목표

1. 특정 프로바이더 크롤링을 수동으로 트리거하는 엔드포인트 추가
2. 현재 크롤링 상태를 조회하는 엔드포인트 추가
3. 프로바이더별 락으로 동시 수행 방지

## 관련 파일

```
apps/api/src/main/java/com/hanzi/stocker/ingest/news/
├── NewsCrawlEngine.java         # 크롤링 엔진 (기존)
├── provider/
│   ├── ProviderRegistry.java    # 프로바이더 조회 (기존)
│   ├── hk/
│   └── mk/
```

## 할 것

### 1. 엔드포인트

**POST /internal/crawl/news/{providerId}**
- 특정 프로바이더 크롤링 트리거
- providerId: `hk`, `mk` 등 (ProviderRegistry에서 조회)
- 비동기 실행 (트리거 후 즉시 응답)

응답:
```json
// 트리거 성공
{ "status": "started", "provider": "hk" }

// 이미 진행 중
{ "status": "already_running", "provider": "hk" }

// 프로바이더 없음
{ "status": "not_found", "provider": "xxx" }
```

**GET /internal/crawl/news/status**
- 현재 크롤링 상태 조회
- 각 프로바이더별 상태 반환

응답:
```json
{ "hk": "running", "mk": "idle" }
```

### 2. 프로바이더별 락

- 프로바이더별로 독립적인 락 관리
- 같은 프로바이더 동시 크롤링 방지
- 다른 프로바이더는 동시 실행 가능

## 안 할 것

- 인증/권한 처리
- KRX 크롤러 엔드포인트
- 크롤링 결과 상세 반환 (비동기이므로)
